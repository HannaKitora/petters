<div class="container">
  <div class="row">
    <%= render 'layouts/list', user: @user, pets: @pets %>
    <%= render "searches/form" %>
  
    <div class="col-md-8 offset-md-1 col-sm-10 mx-2 mx-sm-auto">
      <h1>Pets</h1>
      <div class="card-list-container py-5">
        <% if user_signed_in? %>
          <% @pets.each do |pet| %>
            <div class="card w-50 mx-auto mt-4 shadow-lg">
              <%= link_to pet_path(pet.id) do %>
                <%= image_tag pet.get_image, class: "card-img-top mx-auto p-2"; %>
              <% end %>
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <% if pet.user.present? %>
                      <%= link_to user_path(pet.user.id) do%>
                        <%= image_tag pet.user.get_profile_image, size: '50x50', class: "mt-3 rounded-circle"; %>
                      <% end %>
                      <%= link_to user_path(pet.user.id) do%>
                        <%= pet.user.name %>
                      <% end %>
                    <% end %>
                    <p class="card-name"><i class="fas fa-paw"></i><%= pet.name %></P>
                    <p class="card-text"><i class="fas fa-tablet-android"></i><%= pet.kind %></P>
                    <p class="card-text"><%= pet.caption %></P>
                    <span><%= link_to "#{pet.comments.count} コメント", pet_path(pet.id), class: "text-dark" %></span>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% else %>
          <% @pets.each do |pet| %>
            <div class="card w-50 mx-auto mt-4 shadow-lg">
              <%= link_to pet_path(pet.id) do %>
                <%= image_tag pet.get_image, class: "card-img-top mx-auto p-2"; %>
              <% end %>
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <p class="card-name"><i class="fas fa-paw"></i><%= pet.name %></P>
                    <p class="card-text"><i class="fas fa-tablet-android"></i><%= pet.kind %></P>
                    <p class="card-text"><%= pet.caption %></P>
                    <span><i class="fa-regular fa-comment"></i> <%= link_to "#{pet.comments.count} コメント", pet_path(pet.id), class: "text-dark" %></span>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
      <div class="d-flex align-items-center justify-content-center">
        <%= paginate @pets %>
      </div>
    </div>
  </div>
</div>